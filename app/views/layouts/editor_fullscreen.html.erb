<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= content_for?(:title) ? yield(:title) : 'Write - RailsPress' %></title>
  
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  
  <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  
  <!-- Inter Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- Editor.js Core -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script>
  
  <!-- Editor.js Tools -->
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/header@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/list@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/quote@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/code@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/image@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/embed@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/table@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/warning@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/delimiter@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/checklist@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/marker@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/inline-code@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/underline@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/nested-list@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/raw@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@editorjs/attaches@latest"></script>
  
  <%= javascript_importmap_tags %>
  
  <style>
    /* Notion-like fullscreen editor styles */
    body {
      margin: 0;
      padding: 0;
      background: #ffffff;
      color: #37352f;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
    }
    
    @media (prefers-color-scheme: dark) {
      body {
        background: #191919;
        color: rgba(255, 255, 255, 0.9);
      }
    }
    
    /* Editor.js custom styles for Notion-like appearance */
    .codex-editor {
      padding: 0 !important;
    }
    
    .codex-editor__redactor {
      padding-bottom: 300px !important;
    }
    
    .ce-block__content {
      max-width: 700px;
      margin: 0 auto;
    }
    
    .ce-toolbar__content {
      max-width: 700px;
      margin: 0 auto;
    }
    
    .ce-paragraph {
      line-height: 1.6;
      font-size: 16px;
    }
    
    /* Placeholder styling */
    .codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {
      color: rgba(55, 53, 47, 0.4);
    }
    
    @media (prefers-color-scheme: dark) {
      .codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {
        color: rgba(255, 255, 255, 0.3);
      }
    }
    
    /* Floating toolbar */
    .editor-toolbar {
      position: sticky;
      top: 0;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      z-index: 1000;
      transition: all 0.2s ease;
    }
    
    @media (prefers-color-scheme: dark) {
      .editor-toolbar {
        background: rgba(25, 25, 25, 0.95);
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }
    }
    
    .editor-toolbar.hidden {
      transform: translateY(-100%);
    }
    
    /* Title input */
    .title-input {
      font-size: 40px;
      font-weight: 700;
      line-height: 1.2;
      border: none;
      outline: none;
      background: transparent;
      width: 100%;
      padding: 0;
      margin-bottom: 8px;
      color: #37352f;
    }
    
    @media (prefers-color-scheme: dark) {
      .title-input {
        color: rgba(255, 255, 255, 0.9);
      }
    }
    
    .title-input::placeholder {
      color: rgba(55, 53, 47, 0.3);
    }
    
    @media (prefers-color-scheme: dark) {
      .title-input::placeholder {
        color: rgba(255, 255, 255, 0.2);
      }
    }
    
    /* Smooth animations */
    * {
      transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
    }
    
    /* Hide scrollbar but keep functionality */
    .editor-container::-webkit-scrollbar {
      width: 6px;
    }
    
    .editor-container::-webkit-scrollbar-track {
      background: transparent;
    }
    
    .editor-container::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.1);
      border-radius: 3px;
    }
    
    .editor-container::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 0, 0, 0.2);
    }
    
    @media (prefers-color-scheme: dark) {
      .editor-container::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.1);
      }
      
      .editor-container::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.2);
      }
    }
  </style>
</head>

<body class="antialiased">
  <%= yield %>
</body>
</html>
