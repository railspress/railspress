<% content_for :page_title, "Permalink Settings" %>

<div class="max-w-4xl mx-auto">
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-white mb-2">Permalink Settings</h1>
    <p class="text-gray-400">Configure your RailsPress site</p>
  </div>

  <div class="bg-[#111111] border border-[#2a2a2a] rounded-xl p-6">
        
        <%= form_with url: admin_settings_permalinks_path, method: :patch, class: "space-y-6" do |f| %>
          <div class="bg-indigo-500/10 border border-indigo-500/20 rounded-lg p-4">
            <p class="text-indigo-300 text-sm">
              <strong>Important:</strong> Changing permalinks can affect SEO and break existing links. Use with caution.
            </p>
          </div>

          <!-- Permalink Structure -->
          <div>
            <%= label_tag 'settings[permalink_structure]', 'Post Permalink Structure', class: 'block text-sm font-medium text-gray-300 mb-3' %>
            <div class="space-y-3">
              <%= label_tag 'permalink_default', class: 'flex items-start space-x-3 cursor-pointer p-3 bg-[#0a0a0a] rounded-lg hover:bg-[#1a1a1a] transition' do %>
                <%= radio_button_tag 'settings[permalink_structure]', '/blog/:slug', @settings[:permalink_structure] == '/blog/:slug',
                    class: 'mt-1 w-4 h-4 text-indigo-600 bg-[#111111] border-gray-600 focus:ring-indigo-500' %>
                <div class="flex-1">
                  <span class="text-gray-300 block">Default</span>
                  <code class="text-xs text-gray-500">http://yoursite.com/blog/sample-post</code>
                </div>
              <% end %>
              
              <%= label_tag 'permalink_day_name', class: 'flex items-start space-x-3 cursor-pointer p-3 bg-[#0a0a0a] rounded-lg hover:bg-[#1a1a1a] transition' do %>
                <%= radio_button_tag 'settings[permalink_structure]', '/blog/:year/:month/:day/:slug', @settings[:permalink_structure] == '/blog/:year/:month/:day/:slug',
                    class: 'mt-1 w-4 h-4 text-indigo-600 bg-[#111111] border-gray-600 focus:ring-indigo-500' %>
                <div class="flex-1">
                  <span class="text-gray-300 block">Day and name</span>
                  <code class="text-xs text-gray-500">http://yoursite.com/blog/2025/10/12/sample-post</code>
                </div>
              <% end %>
              
              <%= label_tag 'permalink_month_name', class: 'flex items-start space-x-3 cursor-pointer p-3 bg-[#0a0a0a] rounded-lg hover:bg-[#1a1a1a] transition' do %>
                <%= radio_button_tag 'settings[permalink_structure]', '/blog/:year/:month/:slug', @settings[:permalink_structure] == '/blog/:year/:month/:slug',
                    class: 'mt-1 w-4 h-4 text-indigo-600 bg-[#111111] border-gray-600 focus:ring-indigo-500' %>
                <div class="flex-1">
                  <span class="text-gray-300 block">Month and name</span>
                  <code class="text-xs text-gray-500">http://yoursite.com/blog/2025/10/sample-post</code>
                </div>
              <% end %>
              
              <%= label_tag 'permalink_numeric', class: 'flex items-start space-x-3 cursor-pointer p-3 bg-[#0a0a0a] rounded-lg hover:bg-[#1a1a1a] transition' do %>
                <%= radio_button_tag 'settings[permalink_structure]', '/blog/:id', @settings[:permalink_structure] == '/blog/:id',
                    class: 'mt-1 w-4 h-4 text-indigo-600 bg-[#111111] border-gray-600 focus:ring-indigo-500' %>
                <div class="flex-1">
                  <span class="text-gray-300 block">Numeric</span>
                  <code class="text-xs text-gray-500">http://yoursite.com/blog/123</code>
                </div>
              <% end %>
            </div>
          </div>

          <!-- Optional Settings -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <%= label_tag 'settings[category_base]', 'Category Base', class: 'block text-sm font-medium text-gray-300 mb-2' %>
              <%= text_field_tag 'settings[category_base]', @settings[:category_base],
                  placeholder: 'category',
                  class: 'w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500' %>
              <p class="mt-1 text-xs text-gray-500">e.g., /category/tech</p>
            </div>

            <div>
              <%= label_tag 'settings[tag_base]', 'Tag Base', class: 'block text-sm font-medium text-gray-300 mb-2' %>
              <%= text_field_tag 'settings[tag_base]', @settings[:tag_base],
                  placeholder: 'tag',
                  class: 'w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500' %>
              <p class="mt-1 text-xs text-gray-500">e.g., /tag/ruby</p>
            </div>
          </div>

          <!-- Additional Options -->
          <div class="space-y-3">
            <%= label_tag 'settings[use_trailing_slash]', class: 'flex items-center space-x-2 cursor-pointer' do %>
              <%= check_box_tag 'settings[use_trailing_slash]', '1', @settings[:use_trailing_slash],
                  class: 'w-4 h-4 text-indigo-600 bg-[#0a0a0a] border-gray-600 rounded focus:ring-indigo-500' %>
              <span class="text-gray-300">Use trailing slashes in URLs</span>
            <% end %>

            <%= label_tag 'settings[auto_redirect_old_urls]', class: 'flex items-center space-x-2 cursor-pointer' do %>
              <%= check_box_tag 'settings[auto_redirect_old_urls]', '1', @settings[:auto_redirect_old_urls],
                  class: 'w-4 h-4 text-indigo-600 bg-[#0a0a0a] border-gray-600 rounded focus:ring-indigo-500' %>
              <span class="text-gray-300">Automatically redirect old URLs when slug changes</span>
            <% end %>
          </div>

          <div class="pt-6 border-t border-[#2a2a2a] flex items-center justify-end">
            <%= f.submit "Save Changes", class: "px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition cursor-pointer font-medium" %>
          </div>
        <% end %>
  </div>
</div>

