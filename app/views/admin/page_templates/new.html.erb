<% content_for :title, "New Page Template" %>

<div class="w-full">
  <div class="flex items-center gap-4 mb-8">
    <%= link_to admin_page_templates_path, class: "text-gray-400 hover:text-white" do %>
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
    <% end %>
    <h1 class="text-3xl font-bold text-white">New Page Template</h1>
  </div>

  <div class="max-w-4xl">
    <%= form_with model: [:admin, @page_template], class: "space-y-8" do |form| %>
      <% if @page_template.errors.any? %>
        <div class="bg-red-50 border border-red-200 rounded-lg p-4">
          <div class="flex">
            <div class="flex-shrink-0">
              <svg class="h-5 w-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div class="ml-3">
              <h3 class="text-sm font-medium text-red-800">There were some problems with your submission:</h3>
              <div class="mt-2 text-sm text-red-700">
                <ul class="list-disc pl-5 space-y-1">
                  <% @page_template.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                </ul>
              </div>
            </div>
          </div>
        </div>
      <% end %>

      <!-- Basic Information -->
      <div class="bg-[#1a1a1a] border border-[#2a2a2a] rounded-xl p-6">
        <h2 class="text-xl font-bold text-white mb-6">Basic Information</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <%= form.label :name, class: "block text-sm font-medium text-gray-300 mb-2" %>
            <%= form.text_field :name, class: "w-full px-3 py-2 bg-[#111111] border border-[#2a2a2a] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent", placeholder: "My Custom Template" %>
          </div>
          
          <div>
            <%= form.label :template_type, class: "block text-sm font-medium text-gray-300 mb-2" %>
            <%= form.select :template_type, 
                options_for_select([
                  ['Default', 'default'],
                  ['Full Width', 'full_width'],
                  ['Landing Page', 'landing_page'],
                  ['Contact Page', 'contact_page'],
                  ['About Page', 'about_page'],
                  ['Portfolio Page', 'portfolio_page'],
                  ['Blog Page', 'blog_page'],
                  ['Custom', 'custom']
                ], @page_template.template_type),
                {},
                { class: "w-full px-3 py-2 bg-[#111111] border border-[#2a2a2a] rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" } %>
          </div>
        </div>
        
        <div class="mt-6">
          <%= form.label :position, class: "block text-sm font-medium text-gray-300 mb-2" %>
          <%= form.number_field :position, class: "w-full px-3 py-2 bg-[#111111] border border-[#2a2a2a] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent", placeholder: "0" %>
        </div>
        
        <div class="mt-6">
          <label class="flex items-center">
            <%= form.check_box :active, class: "rounded border-[#2a2a2a] text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" %>
            <span class="ml-2 text-sm text-gray-300">Active (template can be used by pages)</span>
          </label>
        </div>
      </div>

      <!-- HTML Content -->
      <div class="bg-[#1a1a1a] border border-[#2a2a2a] rounded-xl p-6">
        <h2 class="text-xl font-bold text-white mb-6">HTML Content</h2>
        <div class="mb-4">
          <div class="text-sm text-gray-400 mb-2">
            Use these template variables in your HTML:
          </div>
          <div class="bg-[#111111] rounded-lg p-3 text-sm text-gray-300 font-mono">
            {{page.title}} - Page title<br>
            {{page.content}} - Page content<br>
            {{page.slug}} - Page slug<br>
            {{page.meta_description}} - Page meta description
          </div>
        </div>
        <%= form.text_area :html_content, 
            class: "w-full px-3 py-2 bg-[#111111] border border-[#2a2a2a] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent font-mono text-sm",
            rows: 15,
            placeholder: "<div class=\"container mx-auto px-4 py-8\">\n  <h1>{{page.title}}</h1>\n  <div class=\"prose\">{{page.content}}</div>\n</div>" %>
      </div>

      <!-- CSS Content -->
      <div class="bg-[#1a1a1a] border border-[#2a2a2a] rounded-xl p-6">
        <h2 class="text-xl font-bold text-white mb-6">CSS Styles</h2>
        <%= form.text_area :css_content, 
            class: "w-full px-3 py-2 bg-[#111111] border border-[#2a2a2a] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent font-mono text-sm",
            rows: 10,
            placeholder: ".page-template-default {\n  font-family: system-ui, sans-serif;\n  line-height: 1.6;\n}" %>
      </div>

      <!-- JavaScript Content -->
      <div class="bg-[#1a1a1a] border border-[#2a2a2a] rounded-xl p-6">
        <h2 class="text-xl font-bold text-white mb-6">JavaScript</h2>
        <%= form.text_area :js_content, 
            class: "w-full px-3 py-2 bg-[#111111] border border-[#2a2a2a] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent font-mono text-sm",
            rows: 8,
            placeholder: "// Template-specific JavaScript\nconsole.log('Template loaded');" %>
      </div>

      <!-- Actions -->
      <div class="flex items-center justify-end gap-4 pt-6 border-t border-[#2a2a2a]">
        <%= link_to "Cancel", admin_page_templates_path, class: "px-4 py-2 text-gray-400 hover:text-white font-medium" %>
        <%= form.submit "Create Template", class: "bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-medium" %>
      </div>
    <% end %>
  </div>
</div>





