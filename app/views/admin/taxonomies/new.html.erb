<% content_for :page_title, "Create Taxonomy" %>

<div class="max-w-4xl mx-auto">
  <div class="mb-6">
    <%= link_to admin_taxonomies_path, class: "flex items-center space-x-2 text-gray-400 hover:text-white transition mb-4" do %>
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
      </svg>
      <span>Back to Taxonomies</span>
    <% end %>
    
    <h1 class="text-2xl font-bold text-white mb-2">Create New Taxonomy</h1>
    <p class="text-gray-400">Define a new way to organize your content</p>
  </div>

  <div class="bg-[#111111] border border-[#2a2a2a] rounded-xl p-6">
    <%= form_with model: @taxonomy, url: admin_taxonomies_path, class: "space-y-6" do |f| %>
      <!-- Name -->
      <div>
        <%= f.label :name, 'Taxonomy Name', class: 'block text-sm font-medium text-gray-300 mb-2' %>
        <%= f.text_field :name, 
            placeholder: 'e.g., Topics, Series, Formats',
            class: 'w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500',
            required: true %>
      </div>

      <!-- Slug -->
      <div>
        <%= f.label :slug, 'Slug', class: 'block text-sm font-medium text-gray-300 mb-2' %>
        <%= f.text_field :slug, 
            placeholder: 'auto-generated from name',
            class: 'w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500' %>
        <p class="mt-1 text-sm text-gray-500">URL-friendly version (leave blank to auto-generate)</p>
      </div>

      <!-- Description -->
      <div>
        <%= f.label :description, class: 'block text-sm font-medium text-gray-300 mb-2' %>
        <%= f.text_area :description, 
            rows: 3,
            placeholder: 'Describe what this taxonomy is used for...',
            class: 'w-full px-4 py-2 bg-[#0a0a0a] border border-[#2a2a2a] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500' %>
      </div>

      <!-- Hierarchical -->
      <div class="bg-[#0a0a0a] rounded-lg p-4">
        <%= f.label :hierarchical, class: 'flex items-start space-x-3 cursor-pointer' do %>
          <%= f.check_box :hierarchical, class: 'mt-1 w-4 h-4 text-indigo-600 bg-[#111111] border-gray-600 rounded focus:ring-indigo-500' %>
          <div>
            <span class="text-gray-300 font-medium block">Hierarchical</span>
            <p class="text-sm text-gray-500 mt-1">Enable parent/child relationships (like Categories). Disable for flat structure (like Tags).</p>
          </div>
        <% end %>
      </div>

      <!-- Object Types -->
      <div>
        <%= f.label :object_types, 'Apply to Content Types', class: 'block text-sm font-medium text-gray-300 mb-3' %>
        <div class="space-y-2">
          <% ['Post', 'Page'].each do |type| %>
            <%= label_tag "taxonomy_object_types_#{type.downcase}", class: 'flex items-center space-x-2 cursor-pointer' do %>
              <%= check_box_tag 'taxonomy[object_types][]', type, false,
                  class: 'w-4 h-4 text-indigo-600 bg-[#0a0a0a] border-gray-600 rounded focus:ring-indigo-500',
                  id: "taxonomy_object_types_#{type.downcase}" %>
              <span class="text-gray-300"><%= type.pluralize %></span>
            <% end %>
          <% end %>
        </div>
        <p class="mt-2 text-sm text-gray-500">Select which content types can use this taxonomy</p>
      </div>

      <!-- Examples -->
      <div class="bg-indigo-500/10 border border-indigo-500/20 rounded-lg p-4">
        <p class="text-indigo-300 text-sm font-semibold mb-2">ðŸ’¡ Examples of Custom Taxonomies:</p>
        <ul class="text-sm text-indigo-200 space-y-1 list-disc list-inside">
          <li><strong>Topics</strong> (hierarchical) - Main subject areas like Technology > Programming > Ruby</li>
          <li><strong>Formats</strong> (flat) - Content formats: Video, Audio, Gallery, Quote</li>
          <li><strong>Series</strong> (hierarchical) - Group related posts into series</li>
          <li><strong>Difficulty</strong> (flat) - Beginner, Intermediate, Advanced</li>
        </ul>
      </div>

      <!-- Buttons -->
      <div class="flex items-center justify-between pt-6 border-t border-[#2a2a2a]">
        <%= link_to "Cancel", admin_taxonomies_path, class: "px-4 py-2 text-gray-400 hover:text-white transition" %>
        <%= f.submit "Create Taxonomy", class: "px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition cursor-pointer font-medium" %>
      </div>
    <% end %>
  </div>
</div>
