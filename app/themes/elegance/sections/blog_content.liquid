<section class="blog-content section" data-section-type="blog_content" data-section-id="{{ section.id }}">
  <div class="container">
    <div class="blog-content-wrapper">
      <main class="blog-main">
        {% if posts.size > 0 %}
          <div class="blog-posts" style="grid-template-columns: repeat({{ section.settings.columns | default: 3 }}, 1fr);">
            {% for post in posts limit: section.settings.posts_per_page %}
              <article class="blog-post-card">
                {% if section.settings.show_featured_images and post.featured_image %}
                  <div class="post-image">
                    <a href="{{ post.url }}" class="post-image-link">
                      <img 
                        src="{{ post.featured_image }}" 
                        alt="{{ post.title }}"
                        class="featured-image"
                        loading="lazy"
                      >
                    </a>
                    {% if post.categories.size > 0 and section.settings.show_categories %}
                      <div class="post-category">
                        <a href="{{ post.categories.first.url }}" class="category-link">
                          {{ post.categories.first.name }}
                        </a>
                      </div>
                    {% endif %}
                  </div>
                {% endif %}

                <div class="post-content">
                  {% if section.settings.show_meta %}
                    <div class="post-meta">
                      {% if post.author %}
                        <span class="meta-author">
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                          </svg>
                          {{ post.author.name }}
                        </span>
                      {% endif %}
                      
                      {% if post.published_at %}
                        <span class="meta-date">
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12,6 12,12 16,14"></polyline>
                          </svg>
                          {{ post.published_at | date: "%b %d, %Y" }}
                        </span>
                      {% endif %}
                      
                      {% if post.reading_time %}
                        <span class="meta-reading">
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                          </svg>
                          {{ post.reading_time }} min
                        </span>
                      {% endif %}
                    </div>
                  {% endif %}

                  <h2 class="post-title">
                    <a href="{{ post.url }}" class="title-link">{{ post.title }}</a>
                  </h2>

                  {% if section.settings.show_excerpts and post.excerpt %}
                    <div class="post-excerpt">
                      <p>{{ post.excerpt | truncate: 150 }}</p>
                    </div>
                  {% endif %}

                  {% if section.settings.show_tags and post.tags.size > 0 %}
                    <div class="post-tags">
                      {% for tag in post.tags limit: 3 %}
                        <a href="{{ tag.url }}" class="tag-link">#{{ tag.name }}</a>
                      {% endfor %}
                    </div>
                  {% endif %}

                  {% if section.settings.show_read_more %}
                    <div class="post-footer">
                      <a href="{{ post.url }}" class="read-more-btn">
                        Read More
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <line x1="5" y1="12" x2="19" y2="12"></line>
                          <polyline points="12,5 19,12 12,19"></polyline>
                        </svg>
                      </a>
                    </div>
                  {% endif %}
                </div>
              </article>
            {% endfor %}
          </div>

          {% if section.settings.show_pagination and posts.size > section.settings.posts_per_page %}
            <nav class="blog-pagination" aria-label="Blog pagination">
              <div class="pagination-wrapper">
                {% if pagination.previous_page %}
                  <a href="{{ pagination.previous_page.url }}" class="pagination-btn prev-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="15,18 9,12 15,6"></polyline>
                    </svg>
                    Previous
                  </a>
                {% endif %}

                <div class="pagination-pages">
                  {% for page in pagination.pages %}
                    {% if page.current %}
                      <span class="pagination-page current">{{ page.number }}</span>
                    {% else %}
                      <a href="{{ page.url }}" class="pagination-page">{{ page.number }}</a>
                    {% endif %}
                  {% endfor %}
                </div>

                {% if pagination.next_page %}
                  <a href="{{ pagination.next_page.url }}" class="pagination-btn next-btn">
                    Next
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="9,18 15,12 9,6"></polyline>
                    </svg>
                  </a>
                {% endif %}
              </div>
            </nav>
          {% endif %}
        {% else %}
          <div class="no-posts">
            <div class="no-posts-content">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" class="no-posts-icon">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14,2 14,8 20,8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10,9 9,9 8,9"></polyline>
              </svg>
              <h3 class="no-posts-title">No posts found</h3>
              <p class="no-posts-description">There are no blog posts available at the moment.</p>
              <a href="/" class="no-posts-btn btn">Go to Homepage</a>
            </div>
          </div>
        {% endif %}
      </main>

      {% if section.settings.show_sidebar %}
        <aside class="blog-sidebar" style="order: {{ section.settings.sidebar_position == 'left' ? '0' : '2' }};">
          {% if section.settings.show_recent_posts %}
            <div class="sidebar-widget">
              <h3 class="widget-title">Recent Posts</h3>
              <div class="recent-posts">
                {% for recent_post in recent_posts limit: 5 %}
                  <div class="recent-post-item">
                    {% if recent_post.featured_image %}
                      <div class="recent-post-image">
                        <a href="{{ recent_post.url }}">
                          <img src="{{ recent_post.featured_image }}" alt="{{ recent_post.title }}" loading="lazy">
                        </a>
                      </div>
                    {% endif %}
                    <div class="recent-post-content">
                      <h4 class="recent-post-title">
                        <a href="{{ recent_post.url }}">{{ recent_post.title }}</a>
                      </h4>
                      <div class="recent-post-meta">
                        {{ recent_post.published_at | date: "%b %d, %Y" }}
                      </div>
                    </div>
                  </div>
                {% endfor %}
              </div>
            </div>
          {% endif %}

          {% if section.settings.show_categories %}
            <div class="sidebar-widget">
              <h3 class="widget-title">Categories</h3>
              <div class="categories-list">
                {% for category in categories %}
                  <div class="category-item">
                    <a href="{{ category.url }}" class="category-link">
                      {{ category.name }}
                      <span class="category-count">({{ category.posts_count }})</span>
                    </a>
                  </div>
                {% endfor %}
              </div>
            </div>
          {% endif %}

          {% if section.settings.show_tags %}
            <div class="sidebar-widget">
              <h3 class="widget-title">Tags</h3>
              <div class="tags-cloud">
                {% for tag in tags limit: 20 %}
                  <a href="{{ tag.url }}" class="tag-link">{{ tag.name }}</a>
                {% endfor %}
              </div>
            </div>
          {% endif %}

          {% if section.settings.show_newsletter %}
            <div class="sidebar-widget newsletter-widget">
              <h3 class="widget-title">Newsletter</h3>
              <p class="newsletter-description">Subscribe to get the latest posts delivered right to your inbox.</p>
              <form class="newsletter-form">
                <input type="email" placeholder="Enter your email" class="newsletter-input" required>
                <button type="submit" class="newsletter-btn btn">Subscribe</button>
              </form>
            </div>
          {% endif %}
        </aside>
      {% endif %}
    </div>
  </div>
</section>

<style>
  .blog-content-wrapper {
    display: grid;
    grid-template-columns: {% if section.settings.show_sidebar %}1fr 300px{% else %}1fr{% endif %};
    gap: 3rem;
    align-items: start;
  }
  
  .blog-posts {
    display: grid;
    gap: 2rem;
  }
  
  .blog-post-card {
    background-color: {{ section.settings.card_background_color | default: 'var(--color-white)' }};
    border-radius: var(--radius-lg);
    overflow: hidden;
    {% if section.settings.card_border %}
      border: 1px solid var(--color-border);
    {% endif %}
    {% if section.settings.card_shadow %}
      box-shadow: var(--shadow-md);
    {% endif %}
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  
  .blog-post-card:hover {
    {% if section.settings.card_hover_effect %}
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    {% endif %}
  }
  
  .post-image {
    position: relative;
    overflow: hidden;
  }
  
  .post-image-link {
    display: block;
    aspect-ratio: 16/9;
    overflow: hidden;
  }
  
  .featured-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }
  
  .post-image-link:hover .featured-image {
    transform: scale(1.05);
  }
  
  .post-category {
    position: absolute;
    top: 1rem;
    left: 1rem;
  }
  
  .category-link {
    background-color: {{ section.settings.category_bg_color | default: 'var(--color-primary)' }};
    color: {{ section.settings.category_text_color | default: 'white' }};
    padding: 0.5rem 1rem;
    border-radius: var(--radius-full);
    font-size: 0.75rem;
    font-weight: 600;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .post-content {
    padding: 1.5rem;
  }
  
  .post-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 1rem;
    align-items: center;
  }
  
  .meta-author,
  .meta-date,
  .meta-reading {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    color: {{ section.settings.meta_color | default: 'var(--color-text-light)' }};
    font-size: 0.875rem;
  }
  
  .meta-author svg,
  .meta-date svg,
  .meta-reading svg {
    color: var(--color-primary);
    flex-shrink: 0;
  }
  
  .post-title {
    margin-bottom: 1rem;
  }
  
  .title-link {
    color: {{ section.settings.title_color | default: 'var(--h2-color)' }};
    text-decoration: none;
    transition: color 0.2s ease;
  }
  
  .title-link:hover {
    color: var(--color-primary);
  }
  
  .post-excerpt {
    color: {{ section.settings.excerpt_color | default: 'var(--p-color)' }};
    margin-bottom: 1rem;
    line-height: 1.6;
  }
  
  .post-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }
  
  .tag-link {
    color: {{ section.settings.tag_color | default: 'var(--color-text-light)' }};
    text-decoration: none;
    font-size: 0.875rem;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    background-color: {{ section.settings.tag_bg_color | default: 'var(--color-surface)' }};
    transition: all 0.2s ease;
  }
  
  .tag-link:hover {
    color: var(--color-primary);
    background-color: {{ section.settings.tag_hover_bg_color | default: 'var(--color-gray-100)' }};
  }
  
  .read-more-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 600;
    transition: all 0.2s ease;
  }
  
  .read-more-btn:hover {
    color: var(--color-primary-dark);
    transform: translateX(4px);
  }
  
  .read-more-btn svg {
    transition: transform 0.2s ease;
  }
  
  .read-more-btn:hover svg {
    transform: translateX(2px);
  }
  
  /* Pagination */
  .blog-pagination {
    margin-top: 3rem;
  }
  
  .pagination-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1rem;
  }
  
  .pagination-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background-color: var(--color-white);
    color: var(--color-text);
    text-decoration: none;
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
    transition: all 0.2s ease;
  }
  
  .pagination-btn:hover {
    background-color: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
  }
  
  .pagination-pages {
    display: flex;
    gap: 0.5rem;
  }
  
  .pagination-page {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    text-decoration: none;
    color: var(--color-text);
    transition: all 0.2s ease;
  }
  
  .pagination-page:hover {
    background-color: var(--color-surface);
  }
  
  .pagination-page.current {
    background-color: var(--color-primary);
    color: white;
  }
  
  /* Sidebar */
  .blog-sidebar {
    position: sticky;
    top: 2rem;
  }
  
  .sidebar-widget {
    background-color: var(--color-white);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    margin-bottom: 2rem;
    {% if section.settings.widget_border %}
      border: 1px solid var(--color-border);
    {% endif %}
    {% if section.settings.widget_shadow %}
      box-shadow: var(--shadow-sm);
    {% endif %}
  }
  
  .widget-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--h3-color);
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--color-primary);
  }
  
  .recent-post-item {
    display: flex;
    gap: 1rem;
    padding: 1rem 0;
    border-bottom: 1px solid var(--color-border);
  }
  
  .recent-post-item:last-child {
    border-bottom: none;
  }
  
  .recent-post-image {
    flex-shrink: 0;
  }
  
  .recent-post-image img {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: var(--radius-md);
  }
  
  .recent-post-title {
    font-size: 0.875rem;
    margin-bottom: 0.5rem;
  }
  
  .recent-post-title a {
    color: var(--color-text);
    text-decoration: none;
    transition: color 0.2s ease;
  }
  
  .recent-post-title a:hover {
    color: var(--color-primary);
  }
  
  .recent-post-meta {
    font-size: 0.75rem;
    color: var(--color-text-light);
  }
  
  .categories-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .category-item {
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--color-border);
  }
  
  .category-item:last-child {
    border-bottom: none;
  }
  
  .category-link {
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: var(--color-text);
    text-decoration: none;
    transition: color 0.2s ease;
  }
  
  .category-link:hover {
    color: var(--color-primary);
  }
  
  .category-count {
    font-size: 0.875rem;
    color: var(--color-text-light);
  }
  
  .tags-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .newsletter-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .newsletter-input {
    padding: 0.75rem;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    font-size: 0.875rem;
  }
  
  .newsletter-input:focus {
    outline: none;
    border-color: var(--color-primary);
  }
  
  /* No Posts */
  .no-posts {
    text-align: center;
    padding: 4rem 2rem;
  }
  
  .no-posts-icon {
    color: var(--color-text-light);
    margin-bottom: 1.5rem;
  }
  
  .no-posts-title {
    color: var(--h2-color);
    margin-bottom: 1rem;
  }
  
  .no-posts-description {
    color: var(--p-color);
    margin-bottom: 2rem;
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .blog-content-wrapper {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    .blog-posts {
      grid-template-columns: 1fr;
    }
    
    .blog-sidebar {
      position: static;
      order: 2;
    }
    
    .pagination-wrapper {
      flex-direction: column;
      gap: 1rem;
    }
    
    .pagination-pages {
      order: 2;
    }
  }
  
  @media (min-width: 769px) and (max-width: 1024px) {
    .blog-posts {
      grid-template-columns: repeat(2, 1fr);
    }
  }
</style>

{% schema %}
{
  "name": "Blog Content",
  "tag": "section",
  "class": "section-blog-content",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout Style",
      "options": [
        { "value": "grid", "label": "Grid" },
        { "value": "list", "label": "List" },
        { "value": "masonry", "label": "Masonry" }
      ],
      "default": "grid"
    },
    {
      "type": "select",
      "id": "columns",
      "label": "Number of Columns",
      "options": [
        { "value": "1", "label": "1 Column" },
        { "value": "2", "label": "2 Columns" },
        { "value": "3", "label": "3 Columns" },
        { "value": "4", "label": "4 Columns" }
      ],
      "default": "3"
    },
    {
      "type": "checkbox",
      "id": "show_sidebar",
      "label": "Show Sidebar",
      "default": true
    },
    {
      "type": "select",
      "id": "sidebar_position",
      "label": "Sidebar Position",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ],
      "default": "right"
    },
    {
      "type": "header",
      "content": "Post Display"
    },
    {
      "type": "checkbox",
      "id": "show_featured_images",
      "label": "Show Featured Images",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_excerpts",
      "label": "Show Excerpts",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_meta",
      "label": "Show Meta Information",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_read_more",
      "label": "Show Read More Button",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_categories",
      "label": "Show Categories",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_tags",
      "label": "Show Tags",
      "default": true
    },
    {
      "type": "range",
      "id": "posts_per_page",
      "label": "Posts Per Page",
      "min": 3,
      "max": 24,
      "step": 3,
      "default": 9
    },
    {
      "type": "checkbox",
      "id": "show_pagination",
      "label": "Show Pagination",
      "default": true
    },
    {
      "type": "header",
      "content": "Card Styling"
    },
    {
      "type": "color",
      "id": "card_background_color",
      "label": "Card Background Color"
    },
    {
      "type": "checkbox",
      "id": "card_border",
      "label": "Card Border",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "card_shadow",
      "label": "Card Shadow",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "card_hover_effect",
      "label": "Card Hover Effect",
      "default": true
    },
    {
      "type": "header",
      "content": "Content Colors"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Post Title Color"
    },
    {
      "type": "color",
      "id": "excerpt_color",
      "label": "Excerpt Color"
    },
    {
      "type": "color",
      "id": "meta_color",
      "label": "Meta Color"
    },
    {
      "type": "color",
      "id": "category_bg_color",
      "label": "Category Background Color"
    },
    {
      "type": "color",
      "id": "category_text_color",
      "label": "Category Text Color"
    },
    {
      "type": "color",
      "id": "tag_color",
      "label": "Tag Color"
    },
    {
      "type": "color",
      "id": "tag_bg_color",
      "label": "Tag Background Color"
    },
    {
      "type": "color",
      "id": "tag_hover_bg_color",
      "label": "Tag Hover Background Color"
    },
    {
      "type": "header",
      "content": "Sidebar"
    },
    {
      "type": "checkbox",
      "id": "show_recent_posts",
      "label": "Show Recent Posts",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_categories",
      "label": "Show Categories Widget",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_tags",
      "label": "Show Tags Widget",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_newsletter",
      "label": "Show Newsletter Widget",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "widget_border",
      "label": "Widget Border",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "widget_shadow",
      "label": "Widget Shadow",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Blog Content",
      "settings": {
        "layout": "grid",
        "columns": "3",
        "show_sidebar": true,
        "show_featured_images": true,
        "show_excerpts": true,
        "show_meta": true,
        "show_read_more": true,
        "posts_per_page": 9,
        "show_pagination": true
      }
    }
  ]
}
{% endschema %}

